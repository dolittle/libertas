<!-- Copyright (c) Dolittle.  All Rights Reserved.  Licensed under the MIT License. See LICENSE file in the project root for full license information. -->

<script type="text/javascript">

    function viewModel() {
        var self = this;
        this.value = 42;

        setInterval(function() {
            self.value = self.value +1;
        }, 1000);
    }

    const aureliaScript = document.createElement('script');
    aureliaScript.type = 'application/javascript';
    aureliaScript.src = 'https://unpkg.com/aurelia-script@1.5.2';
    document.body.appendChild(aureliaScript);

    const content = document.createElement('div');
    content.innerHTML = '<div>${value}</div>';

    aureliaScript.onload = function() {
        au.enhance({
            host: content,
            root: viewModel
        });
    };



    RED.sidebar.addTab({
        id: 'entities',
        label: 'Entities',
        name: 'Entities',
        content: content,
        closeable: true,
        pinned: true,
        iconClass: "fa fa-table",
        disableOnEdit: true,
        onchange: function() { 

        }
    });

    /*
    RED.nodes.registerType('entities-sidebar', {
        category: 'config',
        defaults: {
        },
        paletteLabel: 'Entities',
        label: function () {
            return 'Entities';
        },
        onpaletteadd: function() {
        }
    });*/
</script>

<script type="text/html" data-template-name="entities-sidebar">
</script>

<script type="text/html" data-help-name="entities-sidebar">
</script>